EXEC=$1
OUTPUT=$2
#/usr/local/cuda-11.2/bin/ncu --export ${OUTPUT} --force-overwrite --target-processes application-only --replay-mode kernel --kernel-regex-base function --launch-skip-before-match 0 --sampling-interval auto --sampling-max-passes 5 --sampling-buffer-size 33554432 --profile-from-start 1 --cache-control all --clock-control base --apply-rules yes --import-source no --check-exit-code yes ${EXEC} > ${OUTPUT}.csv
/usr/local/cuda-11.2/bin/ncu --page raw --csv -o ${OUTPUT} --force-overwrite --target-processes all --replay-mode kernel --kernel-id '::regex:^.*(108|88)$:1100' --launch-skip-before-match 0 --section ComputeWorkloadAnalysis --section InstructionStats --section MemoryWorkloadAnalysis_Tables --section MemoryWorkloadAnalysis --section MemoryWorkloadAnalysis_Chart --section WarpStateStats  --sampling-interval auto --sampling-max-passes 2 --sampling-buffer-size 33554432 --profile-from-start 1 --cache-control all --clock-control base --apply-rules yes --import-source no --check-exit-code yes ${EXEC} >${OUTPUT}.csv 
#/usr/local/cuda-11.2/bin/ncu --page raw --csv -o ${OUTPUT} --force-overwrite --target-processes all --replay-mode kernel --launch-skip-before-match 0 --metrics 'l1tex__t_bytes_lookup_hit.sum.per_second,sm__sass_inst_executed_op_shared_ld,smsp__sass_inst_executed_op_global_ld,dram__bytes_write,smsp__thread_inst_executed.sum,smsp__inst_executed.sum,smsp__sass_thread_inst_executed_op_ffma_pred_on.sum,l1tex__t_bytes_pipe_lsu_mem_global_op_ld.sum,l1tex__t_bytes_pipe_lsu_mem_global_op_ld_lookup_hit.sum,l1tex__t_bytes_pipe_lsu_mem_global_op_ld_lookup_hit.sum' --sampling-interval auto --sampling-max-passes 2 --sampling-buffer-size 33554432 --profile-from-start 1 --cache-control all --clock-control base --apply-rules yes --import-source no --check-exit-code yes ${EXEC} >${OUTPUT}.csv
#/usr/local/cuda-11.2/bin/ncu --page raw --csv -o ${OUTPUT} --force-overwrite --target-processes all --replay-mode kernel -k ${KERNEL} --launch-skip-before-match 0 --metrics 'regex:smsp__*' --sampling-interval auto --sampling-max-passes 2 --sampling-buffer-size 33554432 --profile-from-start 1 --cache-control all --clock-control base --apply-rules yes --import-source no --check-exit-code yes ${EXEC} >${OUTPUT}.csv
#/usr/local/cuda-11.2/bin/ncu --page raw --csv -o ${OUTPUT} --force-overwrite --target-processes all --replay-mode kernel -k ${KERNEL} --launch-skip-before-match 0 --section ComputeWorkloadAnalysis --sampling-interval auto --sampling-max-passes 2 --sampling-buffer-size 33554432 --profile-from-start 1 --cache-control all --clock-control base --apply-rules yes --import-source no --check-exit-code yes ${EXEC} >${OUTPUT}.csv
